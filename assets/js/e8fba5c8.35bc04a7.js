"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8671],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||o;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<o;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6368:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const o={},a="Node Client",s={unversionedId:"alert-trigger/node-client/index",id:"alert-trigger/node-client/index",title:"Node Client",description:"The Node Client is available on Github.",source:"@site/docs/alert-trigger/node-client/index.md",sourceDirName:"alert-trigger/node-client",slug:"/alert-trigger/node-client/",permalink:"/docs/next/alert-trigger/node-client/",draft:!1,editUrl:"https://github.com/notifi-network/notifi-network.github.io/blob/main/docs/alert-trigger/node-client/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Admin Portal & Community Manager",permalink:"/docs/next/alert-trigger/admin-portal/"},next:{title:"Displaying Notification History",permalink:"/docs/next/notification-history/"}},l={},p=[{value:"login",id:"login",level:2},{value:"publishFusionMessage",id:"publishfusionmessage",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"node-client"},"Node Client"),(0,i.kt)("p",null,"The Node Client is available on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/notifi-network/notifi-sdk-ts/tree/main/packages/notifi-node"},"Github"),"."),(0,i.kt)("p",null,"Using the Notifi Node SDK, developers are provided with a very flexible and custom alert triggering tool where the dapp\nfully owns the decision of when to send out notifications."),(0,i.kt)("p",null,"For publishing to your ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/integration-overview/alerts-in-depth#topic"},"topic")," the Node Client has 2 endpoints which are of importance.\nTo follow along, please clone the sample of the Node Client on\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/notifi-network/notifi-sdk-ts/tree/main/packages/notifi-node-sample"},"Github"),"."),(0,i.kt)("p",null,"First, start the server with ",(0,i.kt)("inlineCode",{parentName:"p"},"npm run dev"),"."),(0,i.kt)("h2",{id:"login"},"login"),(0,i.kt)("p",null,"The server will be running at ",(0,i.kt)("inlineCode",{parentName:"p"},"https://localhost:8080"),". To login, you can use the following script below.\nReplace the ",(0,i.kt)("inlineCode",{parentName:"p"},"sid")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," fields with your ",(0,i.kt)("inlineCode",{parentName:"p"},"sid")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," that can be found in the\n",(0,i.kt)("a",{parentName:"p",href:"https://admin.notifi.network/"},"Admin Console"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'#!/bin/bash\n\n# Test the gateway to see if it\'s working\n\ncurl --location --request POST \'http://localhost:8080/login\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    "sid": "9MJEU0",\n    "secret": "XBLNWj"\n}\'\n')),(0,i.kt)("p",null,"This will return a response like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{"token":"eyJhbG","expiry":"2023-07-24T22:06:58.735Z"}\n')),(0,i.kt)("p",null,"You will need the token in the future so please save this. If the token\nexpires, please run this again to issue a new token. In future examples in this\ndocument, the token will be saved as a variable ",(0,i.kt)("inlineCode",{parentName:"p"},"$LOGIN_TOKEN"),"."),(0,i.kt)("h2",{id:"publishfusionmessage"},"publishFusionMessage"),(0,i.kt)("p",null,"To ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/notifi-network/notifi-sdk-ts/tree/main/packages/notifi-node-sample#send-a-fusion-broadcast-message-ap-v2-using-http-post"},"publish messages to your topic"),", you can now use the LOGIN_TOKEN obtained above, along with the FusionEventId that identifies the topic.\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"eventTypeId")," can be obtained from here. The ",(0,i.kt)("inlineCode",{parentName:"p"},"variablesJson")," member is required, but can take any shape you want. You can then create your message templates to reference the JSON path that you've specified. Here is a sample test script below."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"NOTE: For any topic that was created for Community Manager, you can publish to it from this API, but we highly recommend you use our Community Manager in Admin Portal, as topics created for Community Manager adhere to a strict schema that can change without notice.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'#!/bin/bash\n\ncurl --location --request POST \'http://localhost:8080/publishFusionMessage\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $LOGIN_TOKEN" \\\n--data-raw \'{\n  "variables": [\n    {\n      "eventTypeId": "71cc71b9c5de4a838e8c8bf46d25fb2c",\n      "variablesJson": {\n        "Platform": {\n          "message__markdown": "[link text](https://bots.ondiscord.xyz)",\n          "message": "gets overriden by message__markdown",\n          "subject": "dpush test"\n        },\n        "Email": {\n          "message": "gets overriden by message__markdown",\n          "message__markdown": "[link text](https://bots.ondiscord.xyz)",\n          "subject": "dpush test"\n        }\n      }\n    }\n  ]\n}\'\n')),(0,i.kt)("p",null,"If this is successful, the server will respond with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "result": {\n    "indexToResultIdMap": {\n      "0": "c1665c4b-5389-400e-b026-bd93471a0d00"\n    }\n  }\n}\n')))}d.isMDXComponent=!0}}]);